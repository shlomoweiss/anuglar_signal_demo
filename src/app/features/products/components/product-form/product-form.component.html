<form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>
  <h3 class="form-title">Add New Product</h3>

  <div class="form-group">
    <label for="name">Product Name</label>
    <input
      id="name"
      type="text"
      formControlName="name"
      placeholder="e.g. Wireless Headphones"
      [class.is-invalid]="form.controls.name.invalid && form.controls.name.touched"
    />
    @if (form.controls.name.invalid && form.controls.name.touched) {
      <span class="form-error">Name is required (min 2 chars)</span>
    }
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <textarea
      id="description"
      formControlName="description"
      placeholder="Brief product description"
      rows="3"
      [class.is-invalid]="form.controls.description.invalid && form.controls.description.touched"
    ></textarea>
    @if (form.controls.description.invalid && form.controls.description.touched) {
      <span class="form-error">Description is required</span>
    }
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="price">Price ($)</label>
      <input
        id="price"
        type="number"
        formControlName="price"
        min="0"
        step="0.01"
        [class.is-invalid]="form.controls.price.invalid && form.controls.price.touched"
      />
      @if (form.controls.price.invalid && form.controls.price.touched) {
        <span class="form-error">Valid price is required</span>
      }
    </div>

    <div class="form-group">
      <label for="stock">Stock</label>
      <input
        id="stock"
        type="number"
        formControlName="stock"
        min="0"
        [class.is-invalid]="form.controls.stock.invalid && form.controls.stock.touched"
      />
      @if (form.controls.stock.invalid && form.controls.stock.touched) {
        <span class="form-error">Stock must be â‰¥ 0</span>
      }
    </div>
  </div>

  <div class="form-group">
    <label for="category">Category</label>
    <select id="category" formControlName="category">
      @for (cat of categories; track cat) {
        <option [value]="cat">{{ cat | titlecase }}</option>
      }
    </select>
  </div>

  <div class="form-group">
    <label for="imageUrl">Image URL <span class="optional">(optional)</span></label>
    <input
      id="imageUrl"
      type="url"
      formControlName="imageUrl"
      placeholder="https://example.com/image.png"
    />
  </div>

  <button
    type="submit"
    class="btn btn--primary"
    [disabled]="form.invalid || store.loading()"
  >
    @if (store.loading()) { Saving... } @else { Add Product }
  </button>
</form>
